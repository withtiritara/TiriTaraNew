<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>All Trips - Tiri Tara</title>
    <link rel="icon" type="image/svg+xml" href="./assets/logo.webp">
    <link rel="stylesheet" href="style.css">

    <!-- Microsoft Clarity -->
    <script type="text/javascript">
        (function (c, l, a, r, i, t, y) {
            c[a] = c[a] || function () { (c[a].q = c[a].q || []).push(arguments) };
            t = l.createElement(r); t.async = 1; t.src = "https://www.clarity.ms/tag/" + i;
            y = l.getElementsByTagName(r)[0]; y.parentNode.insertBefore(t, y);
        })(window, document, "clarity", "script", "u6zfyrv7r7");
    </script>
    <style>
        /* All Trips Page Specific Styles */
        body {
            background-image: url('./assets/bg.webp');
            background-size: cover;
            background-position: center;
            background-attachment: fixed;
            background-repeat: no-repeat;
            margin: 0;
            padding: 0;
            min-height: 100vh;
            overflow-x: hidden;
        }

        .all-trips-container {
            padding-top: 100px;
            /* Space for navbar */
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: flex-start;
            width: 100%;
            max-width: 100vw;
            overflow-x: hidden;
            transition: padding-top 0.3s ease;
        }

        /* Add extra padding when mobile menu is open */
        body.mobile-menu-open .all-trips-container {
            padding-top: 240px;
        }

        .all-trips-header {
            text-align: center;
            margin-bottom: 3rem;
            color: #fff;
            width: 100%;
            padding: 0 1rem;
            box-sizing: border-box;
        }

        .all-trips-title {
            /* Match checkpoint-header styling exactly */
            font-family: var(--primary-font);
            font-size: 5rem;
            font-weight: 500;
            margin: 3rem 0 0 0;
            text-shadow: 0 4px 20px rgba(255, 255, 255, 0.3);
            color: #000;
            background-clip: text;
            letter-spacing: 0.04em;
            text-transform: uppercase;
        }

        .all-trips-subtitle {
            font-family: var(--description-font);
            color: #000;
            font-size: 1.2rem;
            font-weight: 500;
            margin: 0;
            max-width: 600px;
            margin: 0 auto;
            line-height: 1.6;
        }

        .trips-filter-buttons {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 1rem;
            margin-bottom: 2rem;
            flex-wrap: wrap;
        }

        .filter-btn {
            opacity: 1 !important;
            transform: none !important;
            pointer-events: auto !important;
            margin-top: 0 !important;
        }

        .filter-btn.active {
            background: rgba(255, 255, 255, 0.25) !important;
            border-color: rgba(255, 255, 255, 0.5) !important;
        }

        .escape-card {
            transition: opacity 0.3s ease, transform 0.3s ease;
        }

        .escape-card.hidden {
            display: none;
        }

        .trips-section {
            width: 100%;
            max-width: 1200px;
            padding: 0 2rem;
            margin-bottom: 4rem;
            box-sizing: border-box;
            display: flex;
            justify-content: center;
        }

        .trips-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 2rem;
            justify-items: center;
        }

        /* Override escape cards styles for all trips page */
        .all-trips-container .escape-cards {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 2rem;
            margin-top: 0;
            opacity: 1;
            transform: none;
            transition: none;
            justify-items: center;
            width: 100%;
            max-width: 1200px;
            box-sizing: border-box;
        }

        .all-trips-container .escape-card {
            width: 100%;
            max-width: 350px;
            height: 350px;
            opacity: 1;
            transform: none;
        }

        /* Mobile responsive styles for all trips page */
        @media (max-width: 768px) {

            /* Adjust mobile menu padding for tablets */
            body.mobile-menu-open .all-trips-container {
                padding-top: 220px;
            }

            .all-trips-container {
                padding-top: 80px;
                padding-left: 0;
                padding-right: 0;
            }

            .all-trips-header {
                padding: 0 1.5rem;
                margin-bottom: 2rem;
            }

            .all-trips-title {
                font-size: 2.5rem !important;
            }

            .all-trips-subtitle {
                font-size: 1rem;
                padding: 0;
            }

            .trips-filter-buttons {
                gap: 0.8rem;
                margin-bottom: 1.5rem;
            }

            .filter-btn {
                font-size: 0.9rem !important;
                padding: 0.8rem 1.5rem !important;
            }

            .trips-section {
                padding: 0 1.5rem;
                max-width: 100%;
                width: 100%;
                box-sizing: border-box;
            }

            .all-trips-container .escape-cards {
                display: grid;
                grid-template-columns: repeat(2, 1fr);
                gap: 1.2rem !important;
                padding: 0 !important;
                margin: 0 auto;
                width: 100%;
                justify-items: center;
                box-sizing: border-box;
            }

            .all-trips-container .escape-card {
                width: 100% !important;
                max-width: none !important;
                height: 250px;
                margin: 0;
            }
        }

        @media (max-width: 425px) {

            /* Adjust mobile menu padding for small phones */
            body.mobile-menu-open .all-trips-container {
                padding-top: 200px;
            }

            .all-trips-container {
                padding-left: 0;
                padding-right: 0;
            }

            .all-trips-header {
                padding: 0 1rem;
                margin-bottom: 1.5rem;
            }

            .all-trips-title {
                font-size: 1.5rem !important;
            }

            .all-trips-subtitle {
                font-size: 0.9rem;
                padding: 0;
            }

            .trips-filter-buttons {
                gap: 0.6rem;
                margin-bottom: 1.2rem;
            }

            .filter-btn {
                font-size: 0.8rem !important;
                padding: 0.7rem 1.2rem !important;
            }

            .trips-section {
                padding: 0 1rem;
                width: 100%;
                box-sizing: border-box;
            }

            .all-trips-container .escape-cards {
                display: grid;
                grid-template-columns: repeat(2, 1fr);
                gap: 0.75rem !important;
                padding: 0 !important;
                margin: 0 auto;
                width: 100%;
                justify-items: center;
                box-sizing: border-box;
            }

            .all-trips-container .escape-card {
                width: 100% !important;
                max-width: none !important;
                height: 230px;
                margin: 0;
            }
        }
    </style>
</head>

<body>
    <!-- Floating Navigation -->
    <nav class="floating-navbar">
        <div class="navbar-container">
            <div class="navbar-left">
                <!-- Logo moved to extreme left -->
                <div class="navbar-brand">
                    <a href="index.html">
                        <img src="./assets/logo.webp" alt="Tiri Tara" class="brand-logo">
                    </a>
                </div>
            </div>

            <div class="navbar-right">
                <!-- Navigation links and icons grouped together -->
                <div class="navbar-text-links">
                    <a href="all-trips.html" class="nav-text-link active" title="All Trips"
                        aria-label="All Trips">Trips</a>
                    <a href="about-us.html" class="nav-text-link" title="About Us" aria-label="About Us">About</a>
                    <a href="contact-us.html" class="nav-text-link" title="Contact Us"
                        aria-label="Contact Us">Contact</a>
                </div>
                <div class="navbar-social-icons">
                    <a href="https://www.instagram.com/withtiritara?igsh=NGg5YXF3NDNuNHNm&utm_source=qr"
                        class="nav-icon-link" target="_blank" rel="noopener" title="Instagram" aria-label="Instagram">
                        <img src="./assets/social/instagram.svg" alt="Instagram" class="nav-icon">
                    </a>
                    <a href="https://chat.whatsapp.com/LeKbUgTuEYXGoNCn3P36pT?mode=wwc" class="nav-icon-link"
                        target="_blank" rel="noopener" title="WhatsApp" aria-label="WhatsApp">
                        <img src="./assets/social/whatsapp.svg" alt="WhatsApp" class="nav-icon">
                    </a>
                    <a href="https://www.linkedin.com/company/tiritara/" class="nav-icon-link" target="_blank"
                        rel="noopener" title="LinkedIn" aria-label="LinkedIn">
                        <img src="./assets/social/linkedin.svg" alt="LinkedIn" class="nav-icon">
                    </a>
                </div>
                <a onclick="openJoinForm(event, true)" class="navbar-link join-tribe" id="nav-join-tribe">Join the
                    Tribe</a>
                <button class="navbar-hamburger" id="navbar-hamburger" aria-label="Toggle menu" aria-expanded="false">
                    <span class="hamburger-line"></span>
                    <span class="hamburger-line"></span>
                    <span class="hamburger-line"></span>
                </button>
            </div>
        </div>
        <div class="mobile-menu" id="mobile-menu">
            <a href="index.html" class="mobile-menu-link" title="All Trips">Home </a>
            <a href="contact-us.html" class="mobile-menu-link" title="Contact Us">Contact</a>
            <a href="about-us.html" class="mobile-menu-link" title="About Us">About</a>
        </div>
    </nav>

    <div class="all-trips-container">
        <div class="all-trips-header">
            <h1 class="all-trips-title">All Trips</h1>
            <p class="all-trips-subtitle">Discover our curated collection of soulful journeys</p>
        </div>

        <!-- Filter Buttons -->
        <div class="trips-filter-buttons">
            <button class="tribe-join-btn filter-btn active" data-filter="completed">Completed</button>
            <button class="tribe-join-btn filter-btn" data-filter="upcoming">Upcoming</button>
        </div>

        <div class="trips-section">
            <!-- Escape Cards -->
            <div class="escape-cards">
                <div class="escape-card" data-status="completed" data-start-date="2025-11-07"
                    data-journey="Think sunrises on hilltops, sunsets over temples, and a river that holds a few surprises of its own. You might chase reflections, paddle through stillness, or catch a quiet moment with a creature older than the stones themselves. When the last sunset fades, all you'll want is one more evening in Hampi."
                    data-price="7499/-" data-dates="7th – 10th November 2025"
                    data-start="7th November, Friday, 8:00 PM (from Hyderabad)"
                    data-return="10th November, Monday, 7:00 AM (to Hyderabad)"
                    data-accommodation="Dorm (8-share): ₹7,499 <br/> Room (2-share): ₹7,899"
                    data-includes="travel, stay, food, activities & tickets (₹300/day meal cap)"
                    data-max-spots="15 only" data-last-date="1st November">
                    <div class="card-image">
                        <img src="./assets/completed-hampi.webp" alt="Hampi Journey" />
                    </div>
                    <div class="card-overlay">
                        <h3 class="card-title">Hampi</h3>
                        <p class="card-description">Completed</p>
                    </div>
                </div>
                <div class="escape-card" data-status="completed" data-start-date="2025-10-01">
                    <div class="card-image">
                        <img src="./assets/completed-panchgani.webp" alt="Panchgani Journey" />
                    </div>
                    <div class="card-overlay">
                        <h3 class="card-title">Panchgani</h3>
                        <p class="card-description">Completed</p>
                    </div>
                </div>
                <div class="escape-card" data-status="upcoming" data-journey-key="hampi2026"
                    data-start-date="2026-01-09">
                    <div class="card-image">
                        <img src="./journeys/Hampi.png" alt="Hampi Journey" />
                    </div>
                    <div class="card-overlay">
                        <h3 class="card-title">Hampi</h3>
                        <p class="card-description">9th Jan - 11th Jan</p>
                    </div>
                </div>
                <div class="escape-card" data-status="upcoming" data-start-date="2025-12-24">
                    <div class="trip-sticker christmas">Christmas Special</div>
                    <div class="card-image">
                        <img src="./journeys/dandeli.webp" alt="Dandeli Journey" />
                    </div>
                    <div class="card-overlay">
                        <h3 class="card-title">Dandeli × Gokarna</h3>
                        <p class="card-description">24th Dec - 29th Dec</p>
                    </div>
                </div>
                <div class="escape-card" data-status="upcoming" data-start-date="2026-01-23">
                    <div class="trip-sticker republic-day">Republic Day Special</div>
                    <div class="card-image">
                        <img src="./journeys/araku.webp" alt="Araku Journey" />
                    </div>
                    <div class="card-overlay">
                        <h3 class="card-title">Araku</h3>
                        <p class="card-description">23rd Jan - 27th Jan</p>
                    </div>
                </div>
                <!-- <div class="escape-card">
                    <div class="card-image">
                        <img src="./journeys/Aurangabad.png" alt="Aurangabad Journey" />
                    </div>
                    <div class="card-overlay">
                        <h3 class="card-title">Aurangabad</h3>
                        <p class="card-description">Request Invite</p>
                    </div>
                </div>
                <div class="escape-card">
                    <div class="card-image">
                        <img src="./journeys/Badami.png" alt="Badami Journey" />
                    </div>
                    <div class="card-overlay">
                        <h3 class="card-title">Badami</h3>
                        <p class="card-description">Request Invite</p>
                    </div>
                </div>
                <div class="escape-card">
                    <div class="card-image">
                        <img src="./journeys/Bairluty (Jungle Camp).png" alt="Bairluty Jungle Camp Journey" />
                    </div>
                    <div class="card-overlay">
                        <h3 class="card-title">Bairluty Jungle Camp</h3>
                        <p class="card-description">Request Invite</p>
                    </div>
                </div>
                <div class="escape-card">
                    <div class="card-image">
                        <img src="./journeys/Bhandardara (Firefly Festival).png"
                            alt="Bhandardara Firefly Festival Journey" />
                    </div>
                    <div class="card-overlay">
                        <h3 class="card-title">Bhandardara Firefly Festival</h3>
                        <p class="card-description">Request Invite</p>
                    </div>
                </div>
                <div class="escape-card">
                    <div class="card-image">
                        <img src="./journeys/Bhor.png" alt="Bhor Journey" />
                    </div>
                    <div class="card-overlay">
                        <h3 class="card-title">Bhor</h3>
                        <p class="card-description">Request Invite</p>
                    </div>
                </div>
                <div class="escape-card">
                    <div class="card-image">
                        <img src="./journeys/Coorg.png" alt="Coorg Journey" />
                    </div>
                    <div class="card-overlay">
                        <h3 class="card-title">Coorg</h3>
                        <p class="card-description">Request Invite</p>
                    </div>
                </div>
                <div class="escape-card">
                    <div class="card-image">
                        <img src="./journeys/Dandeli.png" alt="Dandeli Journey" />
                    </div>
                    <div class="card-overlay">
                        <h3 class="card-title">Dandeli × Gokarna</h3>
                        <p class="card-description">Request Invite</p>
                    </div>
                </div>
                <div class="escape-card">
                    <div class="card-image">
                        <img src="./journeys/Devkund Waterfalls.png" alt="Devkund Waterfalls Journey" />
                    </div>
                    <div class="card-overlay">
                        <h3 class="card-title">Devkund Waterfalls</h3>
                        <p class="card-description">Request Invite</p>
                    </div>
                </div>
                <div class="escape-card">
                    <div class="card-image">
                        <img src="./journeys/Ekole Valley View.png" alt="Ekole Valley View Journey" />
                    </div>
                    <div class="card-overlay">
                        <h3 class="card-title">Ekole Valley View</h3>
                        <p class="card-description">Request Invite</p>
                    </div>
                </div>
                <div class="escape-card">
                    <div class="card-image">
                        <img src="./journeys/Gandikota.png" alt="Gandikota Journey" />
                    </div>
                    <div class="card-overlay">
                        <h3 class="card-title">Gandikota</h3>
                        <p class="card-description">Request Invite</p>
                    </div>
                </div>
                <div class="escape-card">
                    <div class="card-image">
                        <img src="./journeys/Gangaravam Beach.png" alt="Gangaravam Beach Journey" />
                    </div>
                    <div class="card-overlay">
                        <h3 class="card-title">Gangaravam Beach</h3>
                        <p class="card-description">Request Invite</p>
                    </div>
                </div>
                <div class="escape-card">
                    <div class="card-image">
                        <img src="./journeys/Gokarna.png" alt="Gokarna Journey" />
                    </div>
                    <div class="card-overlay">
                        <h3 class="card-title">Gokarna</h3>
                        <p class="card-description">Request Invite</p>
                    </div>
                </div>
                <div class="escape-card">
                    <div class="card-image">
                        <img src="./journeys/Kalsubai Peak.png" alt="Kalsubai Peak Journey" />
                    </div>
                    <div class="card-overlay">
                        <h3 class="card-title">Kalsubai Peak</h3>
                        <p class="card-description">Request Invite</p>
                    </div>
                </div>
                <div class="escape-card">
                    <div class="card-image">
                        <img src="./journeys/Kalu Waterfalls.png" alt="Kalu Waterfalls Journey" />
                    </div>
                    <div class="card-overlay">
                        <h3 class="card-title">Kalu Waterfalls</h3>
                        <p class="card-description">Request Invite</p>
                    </div>
                </div>
                <div class="escape-card">
                    <div class="card-image">
                        <img src="./journeys/Khandala.png" alt="Khandala Journey" />
                    </div>
                    <div class="card-overlay">
                        <h3 class="card-title">Khandala</h3>
                        <p class="card-description">Request Invite</p>
                    </div>
                </div>
                <div class="escape-card">
                    <div class="card-image">
                        <img src="./journeys/Kolad.png" alt="Kolad Journey" />
                    </div>
                    <div class="card-overlay">
                        <h3 class="card-title">Kolad</h3>
                        <p class="card-description">Request Invite</p>
                    </div>
                </div>
                <div class="escape-card">
                    <div class="card-image">
                        <img src="./journeys/Kudremukh Trek.png" alt="Kudremukh Trek Journey" />
                    </div>
                    <div class="card-overlay">
                        <h3 class="card-title">Kudremukh Trek</h3>
                        <p class="card-description">Request Invite</p>
                    </div>
                </div>
                <div class="escape-card">
                    <div class="card-image">
                        <img src="./journeys/Lonavala.png" alt="Lonavala Journey" />
                    </div>
                    <div class="card-overlay">
                        <h3 class="card-title">Lonavala</h3>
                        <p class="card-description">Request Invite</p>
                    </div>
                </div>
                <div class="escape-card">
                    <div class="card-image">
                        <img src="./journeys/Mahabaleshwar.png" alt="Mahabaleshwar Journey" />
                    </div>
                    <div class="card-overlay">
                        <h3 class="card-title">Mahabaleshwar</h3>
                        <p class="card-description">Request Invite</p>
                    </div>
                </div>
                <div class="escape-card">
                    <div class="card-image">
                        <img src="./journeys/Matheran.png" alt="Matheran Journey" />
                    </div>
                    <div class="card-overlay">
                        <h3 class="card-title">Matheran</h3>
                        <p class="card-description">Request Invite</p>
                    </div>
                </div>
                <div class="escape-card">
                    <div class="card-image">
                        <img src="./journeys/Nashik.png" alt="Nashik Journey" />
                    </div>
                    <div class="card-overlay">
                        <h3 class="card-title">Nashik</h3>
                        <p class="card-description">Request Invite</p>
                    </div>
                </div>
                <div class="escape-card">
                    <div class="card-image">
                        <img src="./journeys/Netravathi Trek (Karnataka).png" alt="Netravathi Trek Journey" />
                    </div>
                    <div class="card-overlay">
                        <h3 class="card-title">Netravathi Trek</h3>
                        <p class="card-description">Request Invite</p>
                    </div>
                </div>
                <div class="escape-card">
                    <div class="card-image">
                        <img src="./journeys/Pondicherry.png" alt="Pondicherry Journey" />
                    </div>
                    <div class="card-overlay">
                        <h3 class="card-title">Pondicherry</h3>
                        <p class="card-description">Request Invite</p>
                    </div>
                </div>
                <div class="escape-card">
                    <div class="card-image">
                        <img src="./journeys/Raigad.png" alt="Raigad Journey" />
                    </div>
                    <div class="card-overlay">
                        <h3 class="card-title">Raigad</h3>
                        <p class="card-description">Request Invite</p>
                    </div>
                </div>
                <div class="escape-card">
                    <div class="card-image">
                        <img src="./journeys/South Goa.png" alt="South Goa Journey" />
                    </div>
                    <div class="card-overlay">
                        <h3 class="card-title">South Goa</h3>
                        <p class="card-description">Request Invite</p>
                    </div>
                </div>
                <div class="escape-card">
                    <div class="card-image">
                        <img src="./journeys/Varkala.png" alt="Varkala Journey" />
                    </div>
                    <div class="card-overlay">
                        <h3 class="card-title">Varkala</h3>
                        <p class="card-description">Request Invite</p>
                    </div>
                </div>
                <div class="escape-card">
                    <div class="card-image">
                        <img src="./journeys/Wayanad.png" alt="Wayanad Journey" />
                    </div>
                    <div class="card-overlay">
                        <h3 class="card-title">Wayanad</h3>
                        <p class="card-description">Request Invite</p>
                    </div>
                </div> -->
            </div>
        </div>
    </div>

    <!-- Footer -->
    <footer class="site-footer" aria-label="Site footer">
        <div class="footer-inner">
            <div class="footer-top-row">
                <p>&copy;2025 Tiri Tara</p>
                <div class="footer-contact">
                    <p>Phone: <a href="tel:+919876543210" class="phone-link">+91 81431 20853</a></p>
                </div>
            </div>
            <div class="footer-links">
                <a href="terms-of-service.html" target="_blank" rel="noopener noreferrer" class="footer-link">Terms of
                    Service</a>
                <a href="refund-cancellation-policy.html" target="_blank" rel="noopener noreferrer"
                    class="footer-link">Refund and Cancellation Policies</a>
                <a href="privacy-policy.html" target="_blank" rel="noopener noreferrer" class="footer-link">Privacy
                    Policy</a>
            </div>
        </div>
    </footer>

    <!-- GSAP and ScrollTrigger libraries -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/ScrollTrigger.min.js"></script>

    <!-- EmailJS library for sending emails -->
    <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/@emailjs/browser@4/dist/email.min.js"></script>

    <!-- Join Form Popup Modal -->
    <div id="joinFormPopup" class="form-popup-overlay" aria-hidden="true" role="dialog" aria-modal="true">
        <div class="form-popup-container">
            <div class="form-popup-header">
                <h2 class="form-popup-title">Join the Tiri Tribe</h2>
                <div class="form-header-actions">
                    <button class="form-close-btn" onclick="closeJoinForm()">&times;</button>
                </div>
            </div>
            <div class="form-popup-content">
                <!-- Google Form Embedded -->
                <iframe
                    src="https://docs.google.com/forms/d/e/1FAIpQLSe5HxGSO54PIwLqk9pgOAM8XMpo86Pgz4HiHf0i17p-lFXX9w/viewform?embedded=true"
                    class="google-form-iframe" title="Join the Tiri Tribe - Signup Form" width="100%" height="100%"
                    frameborder="0" marginheight="0" marginwidth="0" aria-label="Join the Tiri Tribe form">
                    Loading…
                </iframe>
            </div>
        </div>
    </div>

    <!-- Modal for escape card details (moved here for correct stacking) -->
    <div id="escape-modal" class="modal" aria-hidden="true">
        <div class="modal-backdrop" id="escape-modal-backdrop"></div>
        <div class="modal-content" role="dialog" aria-modal="true" aria-labelledby="escape-modal-title">
            <button class="modal-close" id="escape-modal-close" aria-label="Close">×</button>
            <div class="modal-body">
                <!-- Unified content section -->
                <div class="modal-content-section">
                    <div class="modal-header">
                        <h3 id="escape-modal-title">Title</h3>
                        <button class="book-now-btn-small" id="escape-modal-book" type="button">
                            Request Invite
                        </button>
                    </div>

                    <div class="modal-unified-content" id="escape-modal-unified-content">
                        <!-- Content will be populated by JavaScript -->
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Custom JavaScript -->
    <script src="script.js"></script>

    <!-- All Trips Page Specific JavaScript -->
    <script>
        // Handle escape card clicks for all-trips page
        document.addEventListener('DOMContentLoaded', function () {
            // Filter functionality
            const filterButtons = document.querySelectorAll('.filter-btn');
            const escapeCardsContainer = document.querySelector('.escape-cards');
            let escapeCards = Array.from(document.querySelectorAll('.escape-card'));

            // Function to sort trips by start date
            function sortTripsByDate() {
                if (!escapeCardsContainer) return;

                // Separate cards by status
                const completedCards = escapeCards.filter(card => card.getAttribute('data-status') === 'completed');
                const upcomingCards = escapeCards.filter(card => card.getAttribute('data-status') === 'upcoming');
                const otherCards = escapeCards.filter(card => {
                    const status = card.getAttribute('data-status');
                    return status !== 'completed' && status !== 'upcoming';
                });

                // Sort completed trips by date (descending - most recent first)
                completedCards.sort((a, b) => {
                    const dateA = a.getAttribute('data-start-date');
                    const dateB = b.getAttribute('data-start-date');
                    if (dateA && dateB) {
                        return dateB.localeCompare(dateA); // Descending order
                    }
                    if (dateA && !dateB) return -1;
                    if (!dateA && dateB) return 1;
                    return 0;
                });

                // Sort upcoming trips by date (ascending - earliest first)
                upcomingCards.sort((a, b) => {
                    const dateA = a.getAttribute('data-start-date');
                    const dateB = b.getAttribute('data-start-date');
                    if (dateA && dateB) {
                        return dateA.localeCompare(dateB); // Ascending order
                    }
                    if (dateA && !dateB) return -1;
                    if (!dateA && dateB) return 1;
                    return 0;
                });

                // Combine: completed first, then upcoming, then others
                escapeCards = [...completedCards, ...upcomingCards, ...otherCards];

                // Re-append sorted cards to container
                escapeCards.forEach(card => {
                    escapeCardsContainer.appendChild(card);
                });
            }

            // Sort trips on page load
            sortTripsByDate();

            function filterTrips(filterType) {
                escapeCards.forEach(card => {
                    const status = card.getAttribute('data-status');
                    // Only filter cards that have a data-status attribute
                    if (status) {
                        if (status === filterType) {
                            card.classList.remove('hidden');
                        } else {
                            card.classList.add('hidden');
                        }
                    }
                });
            }

            // Set initial filter to show completed trips
            filterTrips('completed');

            filterButtons.forEach(button => {
                button.addEventListener('click', function () {
                    // Remove active class from all buttons
                    filterButtons.forEach(btn => btn.classList.remove('active'));
                    // Add active class to clicked button
                    this.classList.add('active');
                    // Filter trips
                    const filterType = this.getAttribute('data-filter');
                    filterTrips(filterType);
                    // Re-sort trips after filtering
                    sortTripsByDate();
                });
            });

            // Scroll to top when hamburger menu is clicked on all-trips page
            const hamburger = document.getElementById('navbar-hamburger');
            if (hamburger) {
                hamburger.addEventListener('click', function (e) {
                    // Scroll to top smoothly
                    window.scrollTo({
                        top: 0,
                        behavior: 'smooth'
                    });
                });
            }

            // Click on card to navigate to journey details page
            document.querySelectorAll('.escape-card').forEach(card => {
                card.addEventListener('click', function (e) {
                    // Check if join form is open - prevent escape card clicks
                    const joinForm = document.getElementById('joinFormPopup');
                    if (joinForm && joinForm.style.display === 'flex') {
                        e.preventDefault();
                        e.stopPropagation();
                        console.log('Blocked escape card click: join form is open');
                        return false;
                    }

                    // Get the destination name from the card title
                    const title = card.querySelector('.card-title')?.textContent || '';
                    // Check if card has a specific journey key attribute
                    const journeyKey = card.getAttribute('data-journey-key');

                    if (title) {
                        // Track journey page navigation with Vercel Analytics
                        if (typeof window.va !== 'undefined') {
                            window.va('track', 'Journey Page Opened', { destination: title });
                        }

                        // Map destination names to match journey-details.html keys
                        const destinationMap = {
                            'Hampi': 'hampi',
                            'Panchgani': 'panchgani',
                            'Araku': 'araku',
                            'Aurangabad': 'aurangabad',
                            'Badami': 'badami',
                            'Bairluty Jungle Camp': 'bairlutyjunglecamp',
                            'Bhandardara Firefly Festival': 'bhandardarafireflyfestival',
                            'Bhor': 'bhor',
                            'Coorg': 'coorg',
                            'Dandeli': 'dandeli',
                            'Dandeli × Gokarna': 'dandeli',
                            'Devkund Waterfalls': 'devkundwaterfalls',
                            'Ekole Valley View': 'ekolevalleyview',
                            'Gandikota': 'gandikota',
                            'Gangaravam Beach': 'gangaravambeach',
                            'Gokarna': 'gokarna',
                            'Kalsubai Peak': 'kalsubaipeak',
                            'Kalu Waterfalls': 'kaluwaterfalls',
                            'Khandala': 'khandala',
                            'Kolad': 'kolad',
                            'Kudremukh Trek': 'kudremukhtrek',
                            'Lonavala': 'lonavala',
                            'Mahabaleshwar': 'mahabaleshwar',
                            'Matheran': 'matheran',
                            'Nashik': 'nashik',
                            'Netravathi Trek': 'netravathitrek',
                            'Pondicherry': 'pondicherry',
                            'Raigad': 'raigad',
                            'South Goa': 'southgoa',
                            'Varkala': 'varkala',
                            'Wayanad': 'wayanad'
                        };

                        const destination = journeyKey || destinationMap[title] || title.toLowerCase().replace(/\s+/g, '');
                        window.open(`journey-details.html?destination=${destination}`, '_blank');
                    }
                });
            });
        });
    </script>

    <!-- Vercel Web Analytics -->
    <script>
        window.va = window.va || function () { (window.vaq = window.vaq || []).push(arguments); };
    </script>
    <script defer src="https://cdn.vercel-insights.com/v1/script.js"></script>
</body>

</html>